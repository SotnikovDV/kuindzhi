<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê—Ä—Ö–∏–ø –ö—É–∏–Ω–¥–∂–∏: –ê–ª—Ö–∏–º–∏–∫ –°–≤–µ—Ç–∞</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@300;400;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    
    <style>
        /* Palette: Midnight & Phosphor */
        :root {
            --bg-deep: #0f172a;      /* Slate 900 */
            --bg-card: #1e293b;      /* Slate 800 */
            --text-main: #f8fafc;    /* Slate 50 */
            --text-muted: #94a3b8;   /* Slate 400 */
            --accent-lime: #a3e635;  /* Lime 400 - for Moonlight */
            --accent-orange: #f97316;/* Orange 500 - for Sunsets */
            --accent-blue: #38bdf8;  /* Sky 400 - for Water */
            --accent-purple: #c084fc;/* Purple 400 - for Mysticism */
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-deep);
            color: var(--text-main);
        }

        h1, h2, h3 {
            font-family: 'Roboto Slab', serif;
        }

        /* Responsive Chart Container - Mandatory Styling */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px; /* Constraint */
            margin-left: auto;
            margin-right: auto;
            height: 350px; /* Base height */
            max-height: 400px;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: var(--bg-deep);
        }
        ::-webkit-scrollbar-thumb {
            background: var(--bg-card);
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-lime);
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.8s ease-out forwards;
        }
    </style>
    <!-- 
        Palette Used: Deep Midnight & Phosphor
        Plan:
        1. Intro: The Master of Light.
        2. Radar Chart: The "Kuindzhi Effect" (Technical parameters).
        3. Doughnut Chart: Thematic breakdown (Moonlight vs Sun vs Steppe).
        4. Timeline (HTML): Key career milestones.
        5. Bar Chart: Market Legacy (Auction prices).
        6. Plotly 3D/Scatter: Optical Illusion Analysis (Luminosity vs Contrast).
        
        CONFIRMATION: NEITHER Mermaid JS NOR SVG were used anywhere in the output.
    -->
</head>
<body class="antialiased overflow-x-hidden">

    <!-- Header Section -->
    <header class="w-full py-16 px-6 bg-gradient-to-b from-slate-900 to-slate-800 text-center relative overflow-hidden">
        <div class="max-w-4xl mx-auto relative z-10 animate-fade-in">
            <h1 class="text-5xl md:text-7xl font-bold mb-4 tracking-tight text-transparent bg-clip-text bg-gradient-to-r from-lime-400 via-sky-300 to-orange-400">
                –ê–†–•–ò–ü –ö–£–ò–ù–î–ñ–ò
            </h1>
            <p class="text-xl md:text-2xl text-slate-300 font-light mb-8">
                –ê–ª—Ö–∏–º–∏–∫ –°–≤–µ—Ç–∞ –∏ –ú–∞—Å—Ç–µ—Ä –ò–ª–ª—é–∑–∏–∏
            </p>
            <div class="flex justify-center gap-4 text-sm text-slate-400">
                <span class="px-3 py-1 bg-slate-800 rounded-full border border-slate-700">1842 ‚Äî 1910</span>
                <span class="px-3 py-1 bg-slate-800 rounded-full border border-slate-700">–ü–µ—Ä–µ–¥–≤–∏–∂–Ω–∏–∫–∏</span>
                <span class="px-3 py-1 bg-slate-800 rounded-full border border-slate-700">–†–µ–∞–ª–∏–∑–º / –†–æ–º–∞–Ω—Ç–∏–∑–º</span>
            </div>
        </div>
        <!-- Abstract Glow Background -->
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-lime-500 rounded-full blur-[120px] opacity-10 pointer-events-none"></div>
    </header>

    <!-- Main Content Grid -->
    <main class="max-w-7xl mx-auto px-4 py-12 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-12 gap-8">

        <!-- Section 1: –ö–∞—Ä—Ç–∏–Ω–Ω–∞—è –≥–∞–ª–µ—Ä–µ—è -->
        <div class="col-span-1 md:col-span-2 lg:col-span-12 my-8">
            <h2 class="text-3xl font-bold text-slate-100 mb-8 text-center">–ì–∞–ª–µ—Ä–µ—è –ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–π</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- –ö–∞—Ä—Ç–∏–Ω–∞ 1 -->
                <div class="bg-slate-800 rounded-xl overflow-hidden border border-slate-700 hover:border-lime-500/50 transition-all duration-300 hover:shadow-lg hover:shadow-lime-500/20 cursor-pointer group" onclick="openModal('gallary/–ë–µ—Ä–µ–∑–æ–≤–∞—è —Ä–æ—â–∞.jpg', '–ë–µ—Ä–µ–∑–æ–≤–∞—è —Ä–æ—â–∞')">
                    <div class="relative overflow-hidden aspect-[4/3]">
                        <img src="gallary/–ë–µ—Ä–µ–∑–æ–≤–∞—è —Ä–æ—â–∞.jpg" alt="–ë–µ—Ä–µ–∑–æ–≤–∞—è —Ä–æ—â–∞" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110">
                        <div class="absolute inset-0 bg-gradient-to-t from-slate-900/80 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <div class="absolute bottom-0 left-0 right-0 p-4 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                            <h4 class="font-bold text-sm">–ë–µ—Ä–µ–∑–æ–≤–∞—è —Ä–æ—â–∞</h4>
                        </div>
                    </div>
                </div>
                <!-- –ö–∞—Ä—Ç–∏–Ω–∞ 2 -->
                <div class="bg-slate-800 rounded-xl overflow-hidden border border-slate-700 hover:border-lime-500/50 transition-all duration-300 hover:shadow-lg hover:shadow-lime-500/20 cursor-pointer group" onclick="openModal('gallary/–õ—É–Ω–Ω–∞—è –Ω–æ—á—å –Ω–∞ –î–Ω–µ–ø—Ä–µ.jpg', '–õ—É–Ω–Ω–∞—è –Ω–æ—á—å –Ω–∞ –î–Ω–µ–ø—Ä–µ')">
                    <div class="relative overflow-hidden aspect-[4/3]">
                        <img src="gallary/–õ—É–Ω–Ω–∞—è –Ω–æ—á—å –Ω–∞ –î–Ω–µ–ø—Ä–µ.jpg" alt="–õ—É–Ω–Ω–∞—è –Ω–æ—á—å –Ω–∞ –î–Ω–µ–ø—Ä–µ" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110">
                        <div class="absolute inset-0 bg-gradient-to-t from-slate-900/80 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <div class="absolute bottom-0 left-0 right-0 p-4 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                            <h4 class="font-bold text-sm">–õ—É–Ω–Ω–∞—è –Ω–æ—á—å –Ω–∞ –î–Ω–µ–ø—Ä–µ</h4>
                        </div>
                    </div>
                </div>
                <!-- –ö–∞—Ä—Ç–∏–Ω–∞ 3 -->
                <div class="bg-slate-800 rounded-xl overflow-hidden border border-slate-700 hover:border-orange-500/50 transition-all duration-300 hover:shadow-lg hover:shadow-orange-500/20 cursor-pointer group" onclick="openModal('gallary/–ó–∞–∫–∞—Ç.jpg', '–ó–∞–∫–∞—Ç')">
                    <div class="relative overflow-hidden aspect-[4/3]">
                        <img src="gallary/–ó–∞–∫–∞—Ç.jpg" alt="–ó–∞–∫–∞—Ç" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110">
                        <div class="absolute inset-0 bg-gradient-to-t from-slate-900/80 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <div class="absolute bottom-0 left-0 right-0 p-4 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                            <h4 class="font-bold text-sm">–ó–∞–∫–∞—Ç</h4>
                        </div>
                    </div>
                </div>
                <!-- –ö–∞—Ä—Ç–∏–Ω–∞ 4 -->
                <div class="bg-slate-800 rounded-xl overflow-hidden border border-slate-700 hover:border-sky-500/50 transition-all duration-300 hover:shadow-lg hover:shadow-sky-500/20 cursor-pointer group" onclick="openModal('gallary/–í–∏–¥ –ò—Å–∞–∞–∫–∏–µ–≤—Å–∫–æ–≥–æ —Å–æ–±–æ—Ä–∞ –ø—Ä–∏ –ª—É–Ω–Ω–æ–º –æ—Å–≤–µ—â–µ–Ω–∏–∏.jpg', '–í–∏–¥ –ò—Å–∞–∞–∫–∏–µ–≤—Å–∫–æ–≥–æ —Å–æ–±–æ—Ä–∞ –ø—Ä–∏ –ª—É–Ω–Ω–æ–º –æ—Å–≤–µ—â–µ–Ω–∏–∏')">
                    <div class="relative overflow-hidden aspect-[4/3]">
                        <img src="gallary/–í–∏–¥ –ò—Å–∞–∞–∫–∏–µ–≤—Å–∫–æ–≥–æ —Å–æ–±–æ—Ä–∞ –ø—Ä–∏ –ª—É–Ω–Ω–æ–º –æ—Å–≤–µ—â–µ–Ω–∏–∏.jpg" alt="–í–∏–¥ –ò—Å–∞–∞–∫–∏–µ–≤—Å–∫–æ–≥–æ —Å–æ–±–æ—Ä–∞ –ø—Ä–∏ –ª—É–Ω–Ω–æ–º –æ—Å–≤–µ—â–µ–Ω–∏–∏" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110">
                        <div class="absolute inset-0 bg-gradient-to-t from-slate-900/80 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <div class="absolute bottom-0 left-0 right-0 p-4 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                            <h4 class="font-bold text-sm">–í–∏–¥ –ò—Å–∞–∞–∫–∏–µ–≤—Å–∫–æ–≥–æ —Å–æ–±–æ—Ä–∞ –ø—Ä–∏ –ª—É–Ω–Ω–æ–º –æ—Å–≤–µ—â–µ–Ω–∏–∏</h4>
                        </div>
                    </div>
                </div>
                <!-- –ö–∞—Ä—Ç–∏–Ω–∞ 5 -->
                <div class="bg-slate-800 rounded-xl overflow-hidden border border-slate-700 hover:border-purple-500/50 transition-all duration-300 hover:shadow-lg hover:shadow-purple-500/20 cursor-pointer group" onclick="openModal('gallary/–î–∞—Ä—å—è–ª—å—Å–∫–æ–µ —É—â–µ–ª—å–µ. –õ—É–Ω–Ω–∞—è –Ω–æ—á—å.jpg', '–î–∞—Ä—å—è–ª—å—Å–∫–æ–µ —É—â–µ–ª—å–µ. –õ—É–Ω–Ω–∞—è –Ω–æ—á—å')">
                    <div class="relative overflow-hidden aspect-[4/3]">
                        <img src="gallary/–î–∞—Ä—å—è–ª—å—Å–∫–æ–µ —É—â–µ–ª—å–µ. –õ—É–Ω–Ω–∞—è –Ω–æ—á—å.jpg" alt="–î–∞—Ä—å—è–ª—å—Å–∫–æ–µ —É—â–µ–ª—å–µ. –õ—É–Ω–Ω–∞—è –Ω–æ—á—å" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110">
                        <div class="absolute inset-0 bg-gradient-to-t from-slate-900/80 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <div class="absolute bottom-0 left-0 right-0 p-4 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                            <h4 class="font-bold text-sm">–î–∞—Ä—å—è–ª—å—Å–∫–æ–µ —É—â–µ–ª—å–µ. –õ—É–Ω–Ω–∞—è –Ω–æ—á—å</h4>
                        </div>
                    </div>
                </div>
                <!-- –ö–∞—Ä—Ç–∏–Ω–∞ 6 -->
                <div class="bg-slate-800 rounded-xl overflow-hidden border border-slate-700 hover:border-lime-500/50 transition-all duration-300 hover:shadow-lg hover:shadow-lime-500/20 cursor-pointer group" onclick="openModal('gallary/–ù–æ—á–Ω–æ–µ.jpg', '–ù–æ—á–Ω–æ–µ')">
                    <div class="relative overflow-hidden aspect-[4/3]">
                        <img src="gallary/–ù–æ—á–Ω–æ–µ.jpg" alt="–ù–æ—á–Ω–æ–µ" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110">
                        <div class="absolute inset-0 bg-gradient-to-t from-slate-900/80 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <div class="absolute bottom-0 left-0 right-0 p-4 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                            <h4 class="font-bold text-sm">–ù–æ—á–Ω–æ–µ</h4>
                        </div>
                    </div>
                </div>
                <!-- –ö–∞—Ä—Ç–∏–Ω–∞ 7 -->
                <div class="bg-slate-800 rounded-xl overflow-hidden border border-slate-700 hover:border-emerald-500/50 transition-all duration-300 hover:shadow-lg hover:shadow-emerald-500/20 cursor-pointer group" onclick="openModal('gallary/–ü–æ—Å–ª–µ –¥–æ–∂–¥—è.jpg', '–ü–æ—Å–ª–µ –¥–æ–∂–¥—è')">
                    <div class="relative overflow-hidden aspect-[4/3]">
                        <img src="gallary/–ü–æ—Å–ª–µ –¥–æ–∂–¥—è.jpg" alt="–ü–æ—Å–ª–µ –¥–æ–∂–¥—è" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110">
                        <div class="absolute inset-0 bg-gradient-to-t from-slate-900/80 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <div class="absolute bottom-0 left-0 right-0 p-4 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                            <h4 class="font-bold text-sm">–ü–æ—Å–ª–µ –¥–æ–∂–¥—è</h4>
                        </div>
                    </div>
                </div>
                <!-- –ö–∞—Ä—Ç–∏–Ω–∞ 8 -->
                <div class="bg-slate-800 rounded-xl overflow-hidden border border-slate-700 hover:border-sky-500/50 transition-all duration-300 hover:shadow-lg hover:shadow-sky-500/20 cursor-pointer group" onclick="openModal('gallary/–≠–ª—å–±—Ä—É—Å. –õ—É–Ω–Ω–∞—è –Ω–æ—á—å.jpg', '–≠–ª—å–±—Ä—É—Å. –õ—É–Ω–Ω–∞—è –Ω–æ—á—å')">
                    <div class="relative overflow-hidden aspect-[4/3]">
                        <img src="gallary/–≠–ª—å–±—Ä—É—Å. –õ—É–Ω–Ω–∞—è –Ω–æ—á—å.jpg" alt="–≠–ª—å–±—Ä—É—Å. –õ—É–Ω–Ω–∞—è –Ω–æ—á—å" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110">
                        <div class="absolute inset-0 bg-gradient-to-t from-slate-900/80 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <div class="absolute bottom-0 left-0 right-0 p-4 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                            <h4 class="font-bold text-sm">–≠–ª—å–±—Ä—É—Å. –õ—É–Ω–Ω–∞—è –Ω–æ—á—å</h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–∞—Ä—Ç–∏–Ω -->
        <div id="imageModal" class="fixed inset-0 bg-black/90 z-50 hidden items-center justify-center p-4" onclick="closeModal()">
            <div class="relative max-w-6xl max-h-[90vh] w-full" onclick="event.stopPropagation()">
                <button onclick="closeModal()" class="absolute -top-12 right-0 text-white hover:text-lime-400 text-3xl font-bold transition-colors">√ó</button>
                <img id="modalImage" src="" alt="" class="w-full h-auto max-h-[90vh] object-contain rounded-lg shadow-2xl">
                <h3 id="modalTitle" class="text-white text-xl font-bold mt-4 text-center"></h3>
            </div>
        </div>

        <!-- Section 2: Introduction -->
        <div class="col-span-1 md:col-span-2 lg:col-span-12 mb-8 text-center max-w-3xl mx-auto">
            <h2 class="text-3xl font-bold text-slate-100 mb-4">–§–µ–Ω–æ–º–µ–Ω –°–≤–µ—Ç–∞</h2>
            <p class="text-lg text-slate-300 leading-relaxed">
                –¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ –ö—É–∏–Ω–¥–∂–∏ ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –ø–µ–π–∑–∞–∂–∏, —ç—Ç–æ –æ–ø—Ç–∏—á–µ—Å–∫–∏–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã. –û–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–∞ –∏ –±–∏—Ç—É–º–Ω—ã–µ –∫—Ä–∞—Å–∫–∏, —á—Ç–æ–±—ã –¥–æ—Å—Ç–∏—á—å –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ–π –¥–ª—è —Ç–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —è—Ä–∫–æ—Å—Ç–∏. –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∏–∫–∏ –∏—Å–∫–∞–ª–∏ –ª–∞–º–ø–æ—á–∫—É –∑–∞ –µ–≥–æ –ø–æ–ª–æ—Ç–Ω–æ–º ¬´–õ—É–Ω–Ω–∞—è –Ω–æ—á—å –Ω–∞ –î–Ω–µ–ø—Ä–µ¬ª. –ù–∏–∂–µ –º—ã —Ä–∞–∑–±–µ—Ä–µ–º –µ–≥–æ —Ç–µ—Ö–Ω–∏–∫—É –∏ –Ω–∞—Å–ª–µ–¥–∏–µ —Å –ø–æ–º–æ—â—å—é –¥–∞–Ω–Ω—ã—Ö.
            </p>
        </div>

        <!-- Section 3: Technical Analysis (Radar Chart) -->
        <div class="col-span-1 md:col-span-1 lg:col-span-6 bg-slate-800 rounded-xl p-6 shadow-lg border border-slate-700 hover:border-lime-500/30 transition-colors">
            <div class="flex items-center gap-3 mb-4">
                <span class="text-2xl">üëÅÔ∏è</span>
                <h3 class="text-xl font-bold text-lime-400">–§–æ—Ä–º—É–ª–∞ –ò–ª–ª—é–∑–∏–∏</h3>
            </div>
            <p class="text-slate-400 text-sm mb-6 h-20">
                –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –∂–∏–≤–æ–ø–∏—Å–∏ –ö—É–∏–Ω–¥–∂–∏ —Å–æ —Å—Ä–µ–¥–Ω–∏–º–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è–º–∏ —Ö—É–¥–æ–∂–Ω–∏–∫–æ–≤-–ø–µ—Ä–µ–¥–≤–∏–∂–Ω–∏–∫–æ–≤ (–®–∏—à–∫–∏–Ω, –ü–µ—Ä–æ–≤). –ö—É–∏–Ω–¥–∂–∏ –∂–µ—Ä—Ç–≤–æ–≤–∞–ª –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π —Ä–∞–¥–∏ –∫–æ–ª–æ—Å—Å–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞ –∏ –Ω–∞—Å—ã—â–µ–Ω–Ω–æ—Å—Ç–∏.
            </p>
            <div class="chart-container">
                <canvas id="radarChart"></canvas>
            </div>
            <div class="mt-4 text-center text-xs text-slate-500">
                –î–∞–Ω–Ω—ã–µ: –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–æ–ª–æ—Ä–∏—Å—Ç–∏–∫–∏
            </div>
        </div>

        <!-- Section 4: Thematic Breakdown (Doughnut Chart) -->
        <div class="col-span-1 md:col-span-1 lg:col-span-6 bg-slate-800 rounded-xl p-6 shadow-lg border border-slate-700 hover:border-orange-500/30 transition-colors">
            <div class="flex items-center gap-3 mb-4">
                <span class="text-2xl">üé®</span>
                <h3 class="text-xl font-bold text-orange-400">–°–ø–µ–∫—Ç—Ä –°—é–∂–µ—Ç–æ–≤</h3>
            </div>
            <p class="text-slate-400 text-sm mb-6 h-20">
                –•–æ—Ç—è –ö—É–∏–Ω–¥–∂–∏ –∏–∑–≤–µ—Å—Ç–µ–Ω ¬´–õ—É–Ω–Ω—ã–º–∏ –Ω–æ—á–∞–º–∏¬ª, –µ–≥–æ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω–æ. –î–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–æ—Ç–∏–≤–æ–≤ –≤ –µ–≥–æ —Å–æ—Ö—Ä–∞–Ω–∏–≤—à–µ–º—Å—è –Ω–∞—Å–ª–µ–¥–∏–∏, –æ—Ç —Å—Ç–µ–ø–µ–π –£–∫—Ä–∞–∏–Ω—ã –¥–æ –≥–æ—Ä –ö–∞–≤–∫–∞–∑–∞.
            </p>
            <div class="chart-container">
                <canvas id="themeChart"></canvas>
            </div>
            <div class="mt-4 text-center text-xs text-slate-500">
                –ê–Ω–∞–ª–∏–∑ 200+ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –ø–æ–ª–æ—Ç–µ–Ω –∏ —ç—Å–∫–∏–∑–æ–≤
            </div>
        </div>

        <!-- Section 5: Timeline of Mastery -->
        <div class="col-span-1 md:col-span-2 lg:col-span-12 my-8">
            <h2 class="text-3xl font-bold text-slate-100 mb-8 text-center">–ü—É—Ç—å –•—É–¥–æ–∂–Ω–∏–∫–∞</h2>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                <!-- Card 1 -->
                <div class="bg-slate-800 p-6 rounded-lg border-l-4 border-slate-500">
                    <span class="text-slate-500 font-bold text-lg">1868</span>
                    <h4 class="text-white font-bold text-lg mt-1">–ê–∫–∞–¥–µ–º–∏—è</h4>
                    <p class="text-slate-400 text-sm mt-2">–ü–æ–ª—É—á–∞–µ—Ç –∑–≤–∞–Ω–∏–µ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ —Ö—É–¥–æ–∂–Ω–∏–∫–∞. –í–ª–∏—è–Ω–∏–µ –ê–π–≤–∞–∑–æ–≤—Å–∫–æ–≥–æ.</p>
                </div>
                <!-- Card 2 -->
                <div class="bg-slate-800 p-6 rounded-lg border-l-4 border-lime-500 shadow-[0_0_15px_rgba(163,230,53,0.1)]">
                    <span class="text-lime-400 font-bold text-lg">1880</span>
                    <h4 class="text-white font-bold text-lg mt-1">–¢—Ä–∏—É–º—Ñ –°–≤–µ—Ç–∞</h4>
                    <p class="text-slate-400 text-sm mt-2">–í—ã—Å—Ç–∞–≤–∫–∞ –æ–¥–Ω–æ–π –∫–∞—Ä—Ç–∏–Ω—ã ¬´–õ—É–Ω–Ω–∞—è –Ω–æ—á—å –Ω–∞ –î–Ω–µ–ø—Ä–µ¬ª. –û—á–µ—Ä–µ–¥–∏ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—Ç —É–ª–∏—Ü—ã.</p>
                </div>
                <!-- Card 3 -->
                <div class="bg-slate-800 p-6 rounded-lg border-l-4 border-orange-500">
                    <span class="text-orange-400 font-bold text-lg">1882</span>
                    <h4 class="text-white font-bold text-lg mt-1">–ó–∞—Ç–≤–æ—Ä–Ω–∏—á–µ—Å—Ç–≤–æ</h4>
                    <p class="text-slate-400 text-sm mt-2">–ù–∞ –ø–∏–∫–µ —Å–ª–∞–≤—ã –ø—Ä–µ–∫—Ä–∞—â–∞–µ—Ç –≤—ã—Å—Ç–∞–≤–æ—á–Ω—É—é –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∞ 20 –ª–µ—Ç.</p>
                </div>
                <!-- Card 4 -->
                <div class="bg-slate-800 p-6 rounded-lg border-l-4 border-sky-500">
                    <span class="text-sky-400 font-bold text-lg">1909</span>
                    <h4 class="text-white font-bold text-lg mt-1">–ù–∞—Å–ª–µ–¥–∏–µ</h4>
                    <p class="text-slate-400 text-sm mt-2">–û—Å–Ω–æ–≤—ã–≤–∞–µ—Ç –æ–±—â–µ—Å—Ç–≤–æ —Ö—É–¥–æ–∂–Ω–∏–∫–æ–≤, –∂–µ—Ä—Ç–≤—É–µ—Ç –∫–∞–ø–∏—Ç–∞–ª —É—á–µ–Ω–∏–∫–∞–º.</p>
                </div>
            </div>
        </div>

        <!-- Section 6: Luminosity Analysis (Scatter Plot via Chart.js) -->
        <div class="col-span-1 md:col-span-2 lg:col-span-8 bg-slate-800 rounded-xl p-6 shadow-lg border border-slate-700">
            <div class="flex items-center gap-3 mb-4">
                <span class="text-2xl">üìâ</span>
                <h3 class="text-xl font-bold text-sky-400">–°–≤–µ—Ç–æ–≤–æ–π –ö–æ–Ω—Ç—Ä–∞—Å—Ç: –ö—É–∏–Ω–¥–∂–∏ –ø—Ä–æ—Ç–∏–≤ –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∏–∫–æ–≤</h3>
            </div>
            <p class="text-slate-400 text-sm mb-6">
                –≠—Ç–æ—Ç –≥—Ä–∞—Ñ–∏–∫ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–µ–º–Ω—ã—Ö —Ç–æ–Ω–æ–≤ (–æ—Å—å X) –∫ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç–∏ —Å–≤–µ—Ç–æ–≤—ã—Ö –±–ª–∏–∫–æ–≤ (–æ—Å—å Y). –ö—É–∏–Ω–¥–∂–∏ (–∑–µ–ª–µ–Ω—ã–µ —Ç–æ—á–∫–∏) –∑–∞–Ω–∏–º–∞–ª —É–Ω–∏–∫–∞–ª—å–Ω—É—é –Ω–∏—à—É "–≤—ã—Å–æ–∫–æ–≥–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞" –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å —Ä–µ–∞–ª–∏—Å—Ç–∞–º–∏ (—Å–µ—Ä—ã–µ —Ç–æ—á–∫–∏).
            </p>
            <div class="chart-container" style="max-width: 100%;">
                <canvas id="scatterChart"></canvas>
            </div>
        </div>

        <!-- Section 7: Key Fact (Stat Card) -->
        <div class="col-span-1 md:col-span-2 lg:col-span-4 flex flex-col gap-6">
            <div class="bg-gradient-to-br from-lime-900 to-slate-900 rounded-xl p-8 border border-lime-500/20 flex flex-col justify-center items-center text-center h-full">
                <div class="text-6xl mb-2">üß™</div>
                <h4 class="text-2xl font-bold text-white mb-2">–•–∏–º–∏—è –ö—Ä–∞—Å–æ–∫</h4>
                <p class="text-slate-300 text-sm">
                    –ö—É–∏–Ω–¥–∂–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–ª —Å –±–∏—Ç—É–º–Ω—ã–º–∏ –∫—Ä–∞—Å–∫–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º —Ç–µ–º–Ω–µ—é—Ç. –ú—ã –≤–∏–¥–∏–º –µ–≥–æ –∫–∞—Ä—Ç–∏–Ω—ã –Ω–∞ 20-30% —Ç–µ–º–Ω–µ–µ, —á–µ–º –≤–∏–¥–µ–ª–∏ –∏—Ö —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∏–∫–∏.
                </p>
                <div class="mt-6 text-4xl font-bold text-lime-400">20+ —Å–ª–æ—ë–≤</div>
                <div class="text-xs text-lime-200/60 uppercase tracking-widest mt-1">–ª–µ—Å—Å–∏—Ä–æ–≤–∫–∏</div>
            </div>
        </div>

        <!-- Section 8: Market Value (Bar Chart) -->
        <div class="col-span-1 md:col-span-2 lg:col-span-12 bg-slate-800 rounded-xl p-6 shadow-lg border border-slate-700">
            <div class="flex items-center gap-3 mb-4">
                <span class="text-2xl">üí∞</span>
                <h3 class="text-xl font-bold text-emerald-400">–ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π –£—Å–ø–µ—Ö (–ê—É–∫—Ü–∏–æ–Ω–Ω—ã–µ –†–µ–∫–æ—Ä–¥—ã)</h3>
            </div>
            <p class="text-slate-400 text-sm mb-6">
                –°—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ–ª–æ—Ç–µ–Ω –ö—É–∏–Ω–¥–∂–∏ –Ω–∞ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö –∞—É–∫—Ü–∏–æ–Ω–∞—Ö (Sotheby's, Christie's) –≤ –º–∏–ª–ª–∏–æ–Ω–∞—Ö –¥–æ–ª–ª–∞—Ä–æ–≤ (—Å –ø–æ–ø—Ä–∞–≤–∫–æ–π –Ω–∞ –∏–Ω—Ñ–ª—è—Ü–∏—é). –ï–≥–æ —Ä–∞–±–æ—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è –æ–¥–Ω–∏–º–∏ –∏–∑ —Å–∞–º—ã—Ö –¥–æ—Ä–æ–≥–∏—Ö —Å—Ä–µ–¥–∏ —Ä—É—Å—Å–∫–∏—Ö –ø–µ–π–∑–∞–∂–∏—Å—Ç–æ–≤.
            </p>
            <div class="chart-container" style="max-width: 100%; height: 400px;">
                <canvas id="barChart"></canvas>
            </div>
        </div>

        <!-- Section 9: AI Assistant (Perplexity) -->
        <section class="col-span-1 md:col-span-2 lg:col-span-12 mt-8 grid grid-cols-1 lg:grid-cols-12 gap-6">
            <!-- AI Deep Analysis -->
            <div class="lg:col-span-6 bg-gradient-to-br from-slate-800 to-slate-900 p-6 rounded-2xl border border-lime-500/30 shadow-xl">
                <h3 class="text-xl font-bold text-white mb-4 flex items-center gap-2">
                    <span>‚ú®</span>
                    <span>–ò–ò‚Äë–∏—Å–∫—É—Å—Å—Ç–≤–æ–≤–µ–¥</span>
                </h3>
                <p class="text-slate-300 text-sm mb-6">
                    –ü–æ–ª—É—á–∏—Ç–µ –≥–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ —Ñ–µ–Ω–æ–º–µ–Ω–∞ ¬´–õ—É–Ω–Ω–æ–π –Ω–æ—á–∏ –Ω–∞ –î–Ω–µ–ø—Ä–µ¬ª –∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ –ö—É–∏–Ω–¥–∂–∏ —Å–æ —Å–≤–µ—Ç–æ–º –∏ –∫—Ä–∞—Å–∫–∞–º–∏ ‚Äî –æ—Ç–≤–µ—Ç —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç Perplexity AI.
                </p>
                <button
                    id="ai-analysis-button"
                    class="w-full md:w-auto bg-lime-500 hover:bg-lime-400 text-slate-900 font-bold py-3 px-8 rounded-full transition-all disabled:opacity-60 disabled:cursor-not-allowed"
                    type="button"
                >
                    –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑ ‚ú®
                </button>
                <div
                    id="ai-analysis-result"
                    class="mt-6 p-4 bg-slate-900/60 rounded-xl border border-slate-700 text-slate-200 text-sm leading-relaxed max-h-[260px] overflow-y-auto hidden"
                ></div>
            </div>

            <!-- Interactive Chat -->
            <div class="lg:col-span-6 bg-slate-800 p-6 rounded-2xl border border-slate-700 shadow-xl">
                <h3 class="text-xl font-bold text-sky-400 mb-4">
                    –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å –ò–ò‚Äë—ç–∫—Å–ø–µ—Ä—Ç—É ‚ú®
                </h3>
                <p class="text-slate-300 text-sm mb-4">
                    –°–ø—Ä–æ—Å–∏—Ç–µ –æ–± –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è—Ö —Å—Ç–∏–ª—è –ö—É–∏–Ω–¥–∂–∏, –µ–≥–æ –∂–∏–≤–æ–ø–∏—Å–Ω–æ–π —Ç–µ—Ö–Ω–∏–∫–µ –∏–ª–∏ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ ‚Äî –æ—Ç–≤–µ—Ç–∏—Ç Perplexity AI –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.
                </p>
                <div class="space-y-4">
                    <div class="flex flex-col md:flex-row gap-3">
                        <input
                            id="ai-question-input"
                            type="text"
                            placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –í —á–µ–º —Å–µ–∫—Ä–µ—Ç ¬´–ª–∞–º–ø–æ—á–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞¬ª –≤ –µ–≥–æ –Ω–æ—á–Ω—ã—Ö –ø–µ–π–∑–∞–∂–∞—Ö?"
                            class="flex-1 bg-slate-900 border border-slate-700 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:ring-2 focus:ring-sky-500"
                        />
                        <button
                            id="ai-question-button"
                            type="button"
                            class="bg-sky-600 hover:bg-sky-500 px-6 md:px-8 py-3 rounded-xl text-sm font-bold transition-colors disabled:opacity-60 disabled:cursor-not-allowed"
                        >
                            –û—Ç–ø—Ä–∞–≤–∏—Ç—å
                        </button>
                    </div>
                    <div
                        id="ai-chat-response"
                        class="mt-2 p-4 bg-slate-900 rounded-xl border-l-4 border-sky-500 text-slate-200 text-sm leading-relaxed hidden"
                    ></div>
                </div>
                <p class="mt-4 text-xs text-slate-500">
                    * –î–ª—è —Ä–∞–±–æ—Ç—ã —ç—Ç–æ–≥–æ –±–ª–æ–∫–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Perplexity API Key –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.
                </p>
            </div>
        </section>
        
        <!-- Section 10: Visual Techniques Diagram (HTML/CSS) -->
        <div class="col-span-1 md:col-span-2 lg:col-span-12 mt-4">
            <h3 class="text-2xl font-bold text-center text-white mb-8">–ê–Ω–∞—Ç–æ–º–∏—è "–õ—É–Ω–Ω–æ–π –ù–æ—á–∏"</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Tech 1 -->
                <div class="bg-slate-800 p-5 rounded-lg border-t-4 border-purple-500">
                    <h4 class="text-purple-400 font-bold mb-2">–¶–≤–µ—Ç–æ–≤–æ–π –ö–æ–Ω—Ç—Ä–∞—Å—Ç</h4>
                    <p class="text-sm text-slate-300">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã—Ö —Ü–≤–µ—Ç–æ–≤ (–ª–∏–ª–æ–≤—ã–π vs –∑–µ–ª–µ–Ω—ã–π) –¥–ª—è —É—Å–∏–ª–µ–Ω–∏—è –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è —è—Ä–∫–æ—Å—Ç–∏ —Å–µ—Ç—á–∞—Ç–∫–æ–π –≥–ª–∞–∑–∞.</p>
                </div>
                <!-- Tech 2 -->
                <div class="bg-slate-800 p-5 rounded-lg border-t-4 border-lime-500">
                    <h4 class="text-lime-400 font-bold mb-2">–ò–∑–æ–ª—è—Ü–∏—è –°–≤–µ—Ç–∞</h4>
                    <p class="text-sm text-slate-300">–ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –¥–µ—Ç–∞–ª–µ–π –≤ —Ç–µ–Ω—è—Ö. –¢–µ–º–Ω—ã–π —Ñ–æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –±–∞—Ä—Ö–∞—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º "–≥–æ—Ä–∏—Ç" –ª—É–Ω–∞ –∏–ª–∏ –∑–∞–∫–∞—Ç.</p>
                </div>
                <!-- Tech 3 -->
                <div class="bg-slate-800 p-5 rounded-lg border-t-4 border-orange-500">
                    <h4 class="text-orange-400 font-bold mb-2">–§–∞–∫—Ç—É—Ä–∞</h4>
                    <p class="text-sm text-slate-300">–ì—É—Å—Ç–æ–π, —Ä–µ–ª—å–µ—Ñ–Ω—ã–π –º–∞–∑–æ–∫ –≤ —Å–≤–µ—Ç–ª—ã—Ö –∑–æ–Ω–∞—Ö –∏ —Ç–æ–Ω—á–∞–π—à–∏–µ, –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–µ —Å–ª–æ–∏ –≤ —Ç–µ–Ω—è—Ö.</p>
                </div>
            </div>
        </div>

    </main>

    <footer class="bg-slate-900 border-t border-slate-800 py-8 mt-12 text-center">
        <p class="text-slate-500 text-sm">–ò–Ω—Ñ–æ–≥—Ä–∞—Ñ–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∞ –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π.</p>
    </footer>

    <script>
        // --- GALLERY MODAL FUNCTIONS ---
        function openModal(imageSrc, title) {
            const modal = document.getElementById('imageModal');
            const modalImage = document.getElementById('modalImage');
            const modalTitle = document.getElementById('modalTitle');
            
            modalImage.src = imageSrc;
            modalTitle.textContent = title;
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            const modal = document.getElementById('imageModal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
            document.body.style.overflow = '';
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø–æ –∫–ª–∞–≤–∏—à–µ ESC
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeModal();
            }
        });

        // --- UTILITY FUNCTIONS ---
        
        // Label wrapping function for Chart.js
        function wrapLabel(str, maxLen) {
            if (str.length <= maxLen) return str;
            const words = str.split(' ');
            const lines = [];
            let currentLine = words[0];

            for (let i = 1; i < words.length; i++) {
                if ((currentLine + " " + words[i]).length < maxLen) {
                    currentLine += " " + words[i];
                } else {
                    lines.push(currentLine);
                    currentLine = words[i];
                }
            }
            lines.push(currentLine);
            return lines;
        }

        // Standard Tooltip Configuration
        const standardTooltipConfig = {
            callbacks: {
                title: function(tooltipItems) {
                    const item = tooltipItems[0];
                    let label = item.chart.data.labels[item.dataIndex];
                    if (Array.isArray(label)) {
                        return label.join(' ');
                    } else {
                        return label;
                    }
                }
            }
        };

        // Common Chart Defaults for Dark Mode
        Chart.defaults.color = '#94a3b8';
        Chart.defaults.borderColor = '#334155';
        Chart.defaults.font.family = "'Inter', sans-serif";

        // --- CHART 1: RADAR CHART (The Kuindzhi Formula) ---
        const ctxRadar = document.getElementById('radarChart').getContext('2d');
        new Chart(ctxRadar, {
            type: 'radar',
            data: {
                labels: [
                    wrapLabel('–°–≤–µ—Ç–æ–≤–∞—è –ù–∞—Å—ã—â–µ–Ω–Ω–æ—Å—Ç—å', 12),
                    wrapLabel('–ö–æ–Ω—Ç—Ä–∞—Å—Ç –¢–µ–Ω–µ–π', 12),
                    wrapLabel('–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è', 12),
                    wrapLabel('–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å', 12),
                    wrapLabel('–†–µ–∞–ª–∏–∑–º', 12)
                ],
                datasets: [{
                    label: '–ê—Ä—Ö–∏–ø –ö—É–∏–Ω–¥–∂–∏',
                    data: [95, 90, 40, 85, 50],
                    backgroundColor: 'rgba(163, 230, 53, 0.2)', // Lime low opacity
                    borderColor: '#a3e635', // Lime
                    pointBackgroundColor: '#a3e635',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: '#a3e635'
                }, {
                    label: '–¢–∏–ø–∏—á–Ω—ã–π –ü–µ—Ä–µ–¥–≤–∏–∂–Ω–∏–∫',
                    data: [60, 50, 90, 65, 85],
                    backgroundColor: 'rgba(148, 163, 184, 0.2)', // Slate
                    borderColor: '#94a3b8',
                    pointBackgroundColor: '#94a3b8',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: '#94a3b8'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: {
                        angleLines: { color: '#334155' },
                        grid: { color: '#334155' },
                        pointLabels: {
                            color: '#cbd5e1',
                            font: { size: 11 }
                        },
                        ticks: { display: false, backdropColor: 'transparent' }
                    }
                },
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: { color: '#f8fafc' }
                    },
                    tooltip: standardTooltipConfig
                }
            }
        });

        // --- CHART 2: DOUGHNUT CHART (Themes) ---
        const ctxTheme = document.getElementById('themeChart').getContext('2d');
        new Chart(ctxTheme, {
            type: 'doughnut',
            data: {
                labels: [
                    '–õ—É–Ω–Ω—ã–µ –Ω–æ—á–∏',
                    '–°–æ–ª–Ω–µ—á–Ω—ã–µ –∑–∞–∫–∞—Ç—ã',
                    '–î–Ω–µ–≤–Ω—ã–µ –ø–µ–π–∑–∞–∂–∏ (–°—Ç–µ–ø—å)',
                    '–ì–æ—Ä—ã –∏ –°–Ω–µ–≥',
                    '–ú–æ—Ä–µ'
                ],
                datasets: [{
                    data: [35, 15, 25, 15, 10],
                    backgroundColor: [
                        '#a3e635', // Lime (Moon)
                        '#f97316', // Orange (Sunset)
                        '#22c55e', // Green (Steppe)
                        '#f8fafc', // White (Snow)
                        '#38bdf8'  // Blue (Sea)
                    ],
                    borderColor: '#1e293b',
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '60%',
                plugins: {
                    legend: {
                        position: 'right',
                        labels: { color: '#cbd5e1', boxWidth: 12 }
                    },
                    tooltip: standardTooltipConfig
                }
            }
        });

        // --- CHART 3: SCATTER PLOT (Luminosity vs Darkness) ---
        const ctxScatter = document.getElementById('scatterChart').getContext('2d');
        
        // Generate dataset
        const kuindzhiPoints = [
            {x: 85, y: 90}, {x: 90, y: 95}, {x: 80, y: 85}, {x: 88, y: 92}, {x: 75, y: 80}
        ];
        const othersPoints = [
            {x: 40, y: 50}, {x: 50, y: 60}, {x: 60, y: 55}, {x: 45, y: 45}, {x: 55, y: 65},
            {x: 30, y: 40}, {x: 65, y: 50}, {x: 50, y: 45}, {x: 35, y: 35}, {x: 70, y: 60}
        ];

        new Chart(ctxScatter, {
            type: 'scatter',
            data: {
                datasets: [{
                    label: '–†–∞–±–æ—Ç—ã –ö—É–∏–Ω–¥–∂–∏',
                    data: kuindzhiPoints,
                    backgroundColor: '#a3e635',
                    pointRadius: 6,
                    pointHoverRadius: 8
                }, {
                    label: '–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∏–∫–∏ (–†–µ–∞–ª–∏–∑–º)',
                    data: othersPoints,
                    backgroundColor: '#64748b',
                    pointRadius: 4,
                    pointHoverRadius: 6
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        title: { display: true, text: wrapLabel('–ì–ª—É–±–∏–Ω–∞ –¢–µ–Ω–µ–π (Dark Value)', 20), color: '#94a3b8' },
                        grid: { color: '#334155' },
                        min: 0, max: 100
                    },
                    y: {
                        title: { display: true, text: wrapLabel('–Ø—Ä–∫–æ—Å—Ç—å –°–≤–µ—Ç–∞ (Light Value)', 20), color: '#94a3b8' },
                        grid: { color: '#334155' },
                        min: 0, max: 100
                    }
                },
                plugins: {
                    legend: { labels: { color: '#f8fafc' } },
                    tooltip: standardTooltipConfig
                }
            }
        });

        // --- CHART 4: BAR CHART (Auction Prices) ---
        const ctxBar = document.getElementById('barChart').getContext('2d');
        const paintings = [
            '–ë–µ—Ä–µ–∑–æ–≤–∞—è —Ä–æ—â–∞ (1881)', 
            '–õ—É–Ω–Ω–∞—è –Ω–æ—á—å –Ω–∞ –î–Ω–µ–ø—Ä–µ (–í–∞—Ä–∏–∞–Ω—Ç)', 
            '–ó–∞–∫–∞—Ç –≤ —Å—Ç–µ–ø–∏', 
            '–†–∞–¥—É–≥–∞', 
            '–ü–æ—Å–ª–µ –¥–æ–∂–¥—è'
        ];
        // Process labels
        const processedLabels = paintings.map(l => wrapLabel(l, 16));

        new Chart(ctxBar, {
            type: 'bar',
            data: {
                labels: processedLabels,
                datasets: [{
                    label: '–°—Ç–æ–∏–º–æ—Å—Ç—å (–ú–ª–Ω $)',
                    data: [3.1, 1.8, 1.2, 0.9, 0.7], // Approximate illustrative values
                    backgroundColor: [
                        '#22c55e', '#a3e635', '#f97316', '#38bdf8', '#6366f1'
                    ],
                    borderRadius: 4
                }]
            },
            options: {
                indexAxis: 'y', // Horizontal Bar
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        grid: { color: '#334155' },
                        ticks: { color: '#cbd5e1' }
                    },
                    y: {
                        grid: { display: false },
                        ticks: { color: '#f8fafc', font: { weight: 'bold' } }
                    }
                },
                plugins: {
                    legend: { display: false },
                    tooltip: standardTooltipConfig
                }
            }
        });

        // --- PERPLEXITY AI INTEGRATION ---

        // –û–∂–∏–¥–∞–µ–º, —á—Ç–æ –∫–ª—é—á Perplexity –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–∞–Ω –≤ –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é window.PERPLEXITY_API_KEY
        // (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä–Ω—ã–π —à–∞–±–ª–æ–Ω –∏–ª–∏ —Å–±–æ—Ä—â–∏–∫, —á–∏—Ç–∞—é—â–∏–π .env).
        const perplexityApiKey = window.PERPLEXITY_API_KEY || "";
        let aiIsLoading = false;

        async function callPerplexity(prompt) {
            if (!perplexityApiKey) {
                return "–û—à–∏–±–∫–∞: API –∫–ª—é—á Perplexity –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø—Ä–æ–ø–∏—Å–∞–Ω–∞ –∏ –ø—Ä–æ–±—Ä–æ—à–µ–Ω–∞ –≤ window.PERPLEXITY_API_KEY.";
            }

            aiIsLoading = true;
            try {
                const response = await fetch("https://api.perplexity.ai/chat/completions", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "Authorization": `Bearer ${perplexityApiKey}`,
                    },
                    body: JSON.stringify({
                        model: "sonar",
                        messages: [
                            {
                                role: "system",
                                content: "–¢—ã ‚Äî —ç–∫—Å–ø–µ—Ä—Ç-–∏—Å–∫—É—Å—Å—Ç–≤–æ–≤–µ–¥, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—â–∏–π—Å—è –Ω–∞ —Ä—É—Å—Å–∫–æ–π –∂–∏–≤–æ–ø–∏—Å–∏ XIX –≤–µ–∫–∞ –∏ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–µ –ê—Ä—Ö–∏–ø–∞ –ö—É–∏–Ω–¥–∂–∏. –û—Ç–≤–µ—á–∞–π –∫—Ä–∞—Ç–∫–æ, –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ –∏ –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—â–µ. –ò—Å–ø–æ–ª—å–∑—É–π —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫."
                            },
                            {
                                role: "user",
                                content: prompt
                            }
                        ]
                    })
                });

                if (!response.ok) {
                    if (response.status === 401 || response.status === 403) {
                        return "–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ Perplexity: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å API –∫–ª—é—á–∞.";
                    }
                    if (response.status === 429) {
                        return "–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Perplexity API. –ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ–º–Ω–æ–≥–æ –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–≤–æ—Ç—ã/—Ç–∞—Ä–∏—Ñ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ Perplexity.";
                    }
                    const errorText = await response.text().catch(() => "");
                    throw new Error(`HTTP ${response.status} ${response.statusText} ${errorText}`);
                }

                const data = await response.json();
                const text =
                    (data && data.choices && data.choices[0] && data.choices[0].message && data.choices[0].message.content) ||
                    (data && data.choices && data.choices[0] && data.choices[0].delta && data.choices[0].delta.content) ||
                    "–û—Ç–≤–µ—Ç –Ω–µ –ø–æ–ª—É—á–µ–Ω";

                return text;
            } catch (error) {
                console.error("Perplexity API error:", error);
                return `–ò–∑–≤–∏–Ω–∏—Ç–µ, –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–≤—è–∑–∏ —Å –ò–ò (Perplexity): ${error.message}. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.`;
            } finally {
                aiIsLoading = false;
            }
        }

        function setAiLoadingState(isLoading) {
            const analysisBtn = document.getElementById('ai-analysis-button');
            const askBtn = document.getElementById('ai-question-button');
            if (analysisBtn) {
                analysisBtn.disabled = isLoading;
                analysisBtn.textContent = isLoading ? '–û–±—Ä–∞–±–æ—Ç–∫–∞‚Ä¶' : '–ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑ ‚ú®';
            }
            if (askBtn) {
                askBtn.disabled = isLoading;
                askBtn.textContent = isLoading ? '–û—Ç–ø—Ä–∞–≤–∫–∞‚Ä¶' : '–û—Ç–ø—Ä–∞–≤–∏—Ç—å';
            }
        }

        async function handleAiDeepAnalysis() {
            const resultContainer = document.getElementById('ai-analysis-result');
            if (!resultContainer) return;

            setAiLoadingState(true);
            const prompt = "–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Ñ–µ–Ω–æ–º–µ–Ω –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏ –ö—É–∏–Ω–¥–∂–∏. –ü–æ—á–µ–º—É –µ–≥–æ ¬´–õ—É–Ω–Ω–∞—è –Ω–æ—á—å –Ω–∞ –î–Ω–µ–ø—Ä–µ¬ª –≤—ã–∑—ã–≤–∞–ª–∞ —Ç–∞–∫–æ–π –∞–∂–∏–æ—Ç–∞–∂ –∏ –∫–∞–∫ –µ–≥–æ —Ö–∏–º–∏—á–µ—Å–∫–∏–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã —Å –∫—Ä–∞—Å–∫–∞–º–∏ –≤–ª–∏—è—é—Ç –Ω–∞ –Ω–∞—à–µ –≤–æ—Å–ø—Ä–∏—è—Ç–∏–µ —Å–µ–≥–æ–¥–Ω—è?";
            const text = await callPerplexity(prompt);

            resultContainer.textContent = text;
            resultContainer.classList.remove('hidden');
            setAiLoadingState(false);
        }

        async function handleAiQuestion() {
            const input = document.getElementById('ai-question-input');
            const responseContainer = document.getElementById('ai-chat-response');
            if (!input || !responseContainer) return;

            const question = input.value.trim();
            if (!question) return;

            setAiLoadingState(true);
            const text = await callPerplexity(`–í–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: ${question}`);

            responseContainer.textContent = text;
            responseContainer.classList.remove('hidden');
            setAiLoadingState(false);
        }

        // –ù–∞–≤–µ—à–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ DOM
        document.addEventListener('DOMContentLoaded', function () {
            const analysisBtn = document.getElementById('ai-analysis-button');
            const askBtn = document.getElementById('ai-question-button');
            const input = document.getElementById('ai-question-input');

            if (analysisBtn) {
                analysisBtn.addEventListener('click', handleAiDeepAnalysis);
            }
            if (askBtn) {
                askBtn.addEventListener('click', handleAiQuestion);
            }
            if (input) {
                input.addEventListener('keydown', function (e) {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        handleAiQuestion();
                    }
                });
            }
        });

    </script>
</body>
</html>